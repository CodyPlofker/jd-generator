<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Persona Funnel Validation & Scaling</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #1a1a2e;
            overflow: hidden;
            height: 100vh;
        }

        /* Toolbar */
        .toolbar {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #fff;
            padding: 10px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 16px;
            z-index: 1000;
        }

        .toolbar h1 {
            font-size: 16px;
            font-weight: 600;
            color: #1a1a2e;
        }

        .toolbar-divider {
            width: 1px;
            height: 24px;
            background: #e0e0e0;
        }

        .zoom-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .zoom-btn {
            width: 32px;
            height: 32px;
            border: 1px solid #ddd;
            background: #fff;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .zoom-btn:hover {
            background: #f5f5f5;
            border-color: #999;
        }

        .zoom-level {
            font-size: 13px;
            color: #666;
            min-width: 50px;
            text-align: center;
        }

        .fit-btn {
            padding: 6px 12px;
            border: 1px solid #ddd;
            background: #fff;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .fit-btn:hover {
            background: #f5f5f5;
        }

        /* Canvas */
        .canvas-container {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            cursor: grab;
            background:
                radial-gradient(circle at center, #252542 0%, #1a1a2e 100%),
                repeating-linear-gradient(0deg, transparent, transparent 40px, rgba(255,255,255,0.03) 40px, rgba(255,255,255,0.03) 41px),
                repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(255,255,255,0.03) 40px, rgba(255,255,255,0.03) 41px);
        }

        .canvas-container:active {
            cursor: grabbing;
        }

        .canvas {
            transform-origin: 0 0;
            position: absolute;
            width: 4000px;
            height: 3000px;
        }

        /* SVG Connectors */
        .connectors {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .connector {
            stroke: #666;
            stroke-width: 2;
            fill: none;
        }

        .connector.green { stroke: #22c55e; }
        .connector.yellow { stroke: #f59e0b; }
        .connector.red { stroke: #ef4444; }

        .connector-arrow {
            fill: #666;
        }

        .connector-arrow.green { fill: #22c55e; }
        .connector-arrow.yellow { fill: #f59e0b; }
        .connector-arrow.red { fill: #ef4444; }

        /* Nodes */
        .node {
            position: absolute;
            background: #fff;
            border-radius: 12px;
            padding: 16px 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            text-align: center;
            font-size: 14px;
            font-weight: 500;
            min-width: 180px;
            max-width: 280px;
            cursor: default;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .node:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        .node.primary {
            background: #1a1a2e;
            color: #fff;
        }

        .node.phase {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: #fff;
            font-size: 16px;
            font-weight: 700;
            padding: 20px 32px;
        }

        .node.yellow {
            background: #FFD700;
            color: #1a1a2e;
        }

        .node.blue {
            background: #4169E1;
            color: #fff;
        }

        .node.green {
            background: #22c55e;
            color: #fff;
        }

        .node.red {
            background: #ef4444;
            color: #fff;
        }

        .node.amber {
            background: #f59e0b;
            color: #fff;
        }

        .node.purple {
            background: #9932CC;
            color: #fff;
        }

        .node.output {
            background: #ecfdf5;
            border: 3px solid #22c55e;
            color: #166534;
        }

        .node.decision {
            background: #fff;
            border: 3px solid #1a1a2e;
            transform: rotate(0deg);
            border-radius: 8px;
        }

        .node-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.7;
            margin-bottom: 6px;
        }

        .node-title {
            font-size: 14px;
            font-weight: 600;
        }

        .node-subtitle {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 4px;
        }

        /* Detail Cards */
        .detail-card {
            position: absolute;
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            font-size: 13px;
            text-align: left;
            width: 260px;
        }

        .detail-card h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #1a1a2e;
        }

        .detail-card ul {
            padding-left: 18px;
            color: #444;
            line-height: 1.7;
        }

        .detail-card.green-border {
            border: 2px solid #22c55e;
        }

        .detail-card.yellow-border {
            border: 2px solid #f59e0b;
        }

        .detail-card.red-border {
            border: 2px solid #ef4444;
        }

        /* Threshold cards */
        .threshold-card {
            position: absolute;
            background: #fff;
            border-radius: 10px;
            padding: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            width: 200px;
            text-align: left;
        }

        .threshold-card h4 {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            margin-bottom: 10px;
        }

        .threshold-card .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .threshold-card .dot.green { background: #22c55e; }
        .threshold-card .dot.yellow { background: #f59e0b; }
        .threshold-card .dot.red { background: #ef4444; }

        .threshold-card ul {
            list-style: none;
            font-size: 12px;
            color: #555;
        }

        .threshold-card li {
            padding: 3px 0;
        }

        .threshold-card.green { border-top: 4px solid #22c55e; }
        .threshold-card.yellow { border-top: 4px solid #f59e0b; }
        .threshold-card.red { border-top: 4px solid #ef4444; }

        /* Team legend */
        .team-legend {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: #fff;
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 1000;
        }

        .team-legend h4 {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #666;
            margin-bottom: 10px;
        }

        .team-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 6px 0;
            font-size: 12px;
        }

        .team-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .team-dot.research { background: #1a1a2e; }
        .team-dot.creative { background: #FFD700; }
        .team-dot.paid { background: #4169E1; }
        .team-dot.lifecycle { background: #9932CC; }

        /* Help tooltip */
        .help-tooltip {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #fff;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            font-size: 12px;
            color: #666;
            z-index: 1000;
        }

        .help-tooltip kbd {
            background: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <!-- Toolbar -->
    <div class="toolbar">
        <h1>Persona Funnel Validation & Scaling</h1>
        <div class="toolbar-divider"></div>
        <div class="zoom-controls">
            <button class="zoom-btn" onclick="zoomOut()">−</button>
            <span class="zoom-level" id="zoomLevel">100%</span>
            <button class="zoom-btn" onclick="zoomIn()">+</button>
        </div>
        <button class="fit-btn" onclick="fitToScreen()">Fit to Screen</button>
        <button class="fit-btn" onclick="resetView()">Reset</button>
    </div>

    <!-- Team Legend -->
    <div class="team-legend">
        <h4>Team</h4>
        <div class="team-item"><span class="team-dot research"></span> Research</div>
        <div class="team-item"><span class="team-dot creative"></span> Creative</div>
        <div class="team-item"><span class="team-dot paid"></span> Paid Strategy</div>
        <div class="team-item"><span class="team-dot lifecycle"></span> Lifecycle</div>
    </div>

    <!-- Help -->
    <div class="help-tooltip">
        <kbd>Scroll</kbd> to zoom • <kbd>Drag</kbd> to pan
    </div>

    <!-- Canvas -->
    <div class="canvas-container" id="canvasContainer">
        <div class="canvas" id="canvas">
            <!-- SVG Connectors -->
            <svg class="connectors" id="connectors">
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" class="connector-arrow" />
                    </marker>
                    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" class="connector-arrow green" />
                    </marker>
                    <marker id="arrowhead-yellow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" class="connector-arrow yellow" />
                    </marker>
                    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" class="connector-arrow red" />
                    </marker>
                </defs>
            </svg>

            <!-- PHASE 1: RESEARCH -->
            <div class="node phase" style="left: 900px; top: 50px;">
                Phase 1: Research
            </div>

            <div class="node primary" style="left: 870px; top: 150px; width: 220px;">
                <div class="node-label">Start</div>
                <div class="node-title">Outersignal Personas</div>
                <div class="node-subtitle">Begin with angles & insights</div>
            </div>

            <div class="detail-card" style="left: 550px; top: 250px;">
                <h4>Research Activities</h4>
                <ul>
                    <li>Klaviyo persona surveys</li>
                    <li>Review analysis for "golden nuggets"</li>
                    <li>Reddit/FB group research</li>
                    <li>Listenlabs survey</li>
                    <li>Create IG account as persona</li>
                    <li>FB Ads Library scan</li>
                    <li>TikTok trends research</li>
                </ul>
            </div>

            <div class="node output" style="left: 880px; top: 320px; width: 200px;">
                <div class="node-title">Persona Brief</div>
                <div class="node-subtitle">1-Pager Output</div>
            </div>

            <div class="detail-card" style="left: 1150px; top: 250px;">
                <h4>Brief Contains</h4>
                <ul>
                    <li>Demographics & psychographics</li>
                    <li>Key motivations & desires</li>
                    <li>4-6 value props to test</li>
                    <li>Creator profiles to follow</li>
                    <li>Non-competitive ads</li>
                    <li>Golden nugget reviews</li>
                </ul>
            </div>

            <!-- PHASE 2: MVP TESTING -->
            <div class="node phase" style="left: 880px; top: 480px;">
                Phase 2: MVP Testing
            </div>

            <div class="node yellow" style="left: 860px; top: 580px; width: 240px;">
                <div class="node-title">Launch 12-50 Statics</div>
                <div class="node-subtitle">Diversified formats</div>
            </div>

            <div class="detail-card" style="left: 520px; top: 560px;">
                <h4>Testing Parameters</h4>
                <ul>
                    <li>4-5 unique angles/value props</li>
                    <li>2-4 products per persona</li>
                    <li>One ad set per persona+product</li>
                    <li>Direct to LP or PDP</li>
                </ul>
            </div>

            <!-- Persona tracks -->
            <div class="node primary" style="left: 600px; top: 700px; width: 160px;">
                <div class="node-label">Track 1</div>
                <div class="node-title">Persona 1</div>
            </div>

            <div class="node primary" style="left: 900px; top: 700px; width: 160px;">
                <div class="node-label">Track 2</div>
                <div class="node-title">Persona 2</div>
            </div>

            <div class="node primary" style="left: 1200px; top: 700px; width: 160px;">
                <div class="node-label">Track 3</div>
                <div class="node-title">Persona 3</div>
            </div>

            <div class="node blue" style="left: 600px; top: 790px; width: 160px;">
                <div class="node-title">Meta + Google</div>
            </div>

            <div class="node blue" style="left: 900px; top: 790px; width: 160px;">
                <div class="node-title">Meta + Google</div>
            </div>

            <div class="node blue" style="left: 1200px; top: 790px; width: 160px;">
                <div class="node-title">Meta + Google</div>
            </div>

            <!-- Analysis -->
            <div class="node primary" style="left: 860px; top: 900px; width: 240px;">
                <div class="node-title">Analyze Results</div>
                <div class="node-subtitle">Within 5-7 days</div>
            </div>

            <!-- Decision Point -->
            <div class="node decision" style="left: 890px; top: 1020px; width: 180px;">
                <div class="node-title">Decision Point</div>
                <div class="node-subtitle">Evaluate thresholds</div>
            </div>

            <!-- Threshold cards -->
            <div class="threshold-card green" style="left: 550px; top: 1000px;">
                <h4><span class="dot green"></span> Green Light</h4>
                <ul>
                    <li><strong>$2k/day</strong> on concept</li>
                    <li><strong>≥ 0.8 ROAS</strong></li>
                    <li><strong>≥ 60%</strong> New Visit Rate</li>
                </ul>
            </div>

            <div class="threshold-card yellow" style="left: 1220px; top: 950px;">
                <h4><span class="dot yellow"></span> Yellow Light</h4>
                <ul>
                    <li><strong>$1k/day</strong> on concept</li>
                    <li><strong>≥ 0.6 ROAS</strong></li>
                    <li><strong>≥ 50%</strong> New Visit Rate</li>
                </ul>
            </div>

            <div class="threshold-card red" style="left: 1220px; top: 1100px;">
                <h4><span class="dot red"></span> Red Light</h4>
                <ul>
                    <li>Minimal spend</li>
                    <li><strong>< 0.5 ROAS</strong></li>
                    <li><strong>< 40%</strong> New Visit Rate</li>
                </ul>
            </div>

            <!-- PHASE 3: SCALE/ITERATE/CUT -->
            <div class="node phase" style="left: 100px; top: 1200px;">
                Phase 3: Scale
            </div>

            <div class="node green" style="left: 80px; top: 1300px; width: 200px;">
                <div class="node-title">Scale Winners</div>
            </div>

            <div class="detail-card green-border" style="left: 50px; top: 1400px; width: 280px;">
                <h4>Scaling Actions</h4>
                <ul>
                    <li>Scale within ad set & campaigns</li>
                    <li>Produce 2nd batch of statics</li>
                    <li>Create sub-persona batches</li>
                    <li>Animate to GIFs/short videos</li>
                    <li>Test awareness levels</li>
                    <li>Test unique mechanisms</li>
                </ul>
            </div>

            <div class="node amber" style="left: 890px; top: 1180px; width: 180px;">
                <div class="node-title">Iterate</div>
                <div class="node-subtitle">Refine & retest</div>
            </div>

            <div class="detail-card yellow-border" style="left: 1150px; top: 1280px; width: 240px;">
                <h4>Iteration Actions</h4>
                <ul>
                    <li>Refine angle/messaging</li>
                    <li>Test new creative formats</li>
                    <li>Adjust targeting</li>
                    <li>Consider sub-segments</li>
                </ul>
            </div>

            <div class="node red" style="left: 1500px; top: 1180px; width: 180px;">
                <div class="node-title">Cut Losses</div>
                <div class="node-subtitle">Move on</div>
            </div>

            <div class="detail-card red-border" style="left: 1470px; top: 1280px; width: 240px;">
                <h4>Cut Actions</h4>
                <ul>
                    <li>Cut losses immediately</li>
                    <li>Document learnings</li>
                    <li>Apply insights elsewhere</li>
                </ul>
            </div>

            <!-- PHASE 4: SCALING PRODUCTION -->
            <div class="node phase" style="left: 80px; top: 1650px;">
                Phase 4: Scaling Production
            </div>

            <div class="node primary" style="left: 60px; top: 1750px; width: 240px;">
                <div class="node-title">Package Data & Insights</div>
                <div class="node-subtitle">Develop hypothesis</div>
            </div>

            <div class="node yellow" style="left: 80px; top: 1860px; width: 200px;">
                <div class="node-title">Create UGC Briefs</div>
                <div class="node-subtitle">With winning concepts</div>
            </div>

            <!-- Organic & Paid branches -->
            <div class="node" style="left: 50px; top: 1980px; width: 140px;">
                <div class="node-label">Organic</div>
                <div class="node-title">1-3 Creators</div>
                <div class="node-subtitle">Run experiments</div>
            </div>

            <div class="node blue" style="left: 220px; top: 1980px; width: 140px;">
                <div class="node-label">Paid</div>
                <div class="node-title">5-10 Creators</div>
                <div class="node-subtitle">Scale winners</div>
            </div>

            <!-- Final Lifecycle -->
            <div class="node purple" style="left: 80px; top: 2120px; width: 250px;">
                <div class="node-title">Lifecycle Retargeting</div>
                <div class="node-subtitle">Based on expressed need states</div>
            </div>

            <!-- Loop back indicator -->
            <div class="node" style="left: 890px; top: 1320px; width: 180px; background: #f0f0f0; border: 2px dashed #999;">
                <div class="node-title">↻ Back to Testing</div>
                <div class="node-subtitle">New variations</div>
            </div>

        </div>
    </div>

    <script>
        // Canvas pan and zoom
        const container = document.getElementById('canvasContainer');
        const canvas = document.getElementById('canvas');
        const connectorsEl = document.getElementById('connectors');

        let scale = 0.6;
        let panX = -400;
        let panY = 0;
        let isDragging = false;
        let startX, startY;

        function updateTransform() {
            canvas.style.transform = `translate(${panX}px, ${panY}px) scale(${scale})`;
            document.getElementById('zoomLevel').textContent = Math.round(scale * 100) + '%';
        }

        // Mouse wheel zoom
        container.addEventListener('wheel', (e) => {
            e.preventDefault();
            const delta = e.deltaY > 0 ? 0.9 : 1.1;
            const newScale = Math.min(Math.max(scale * delta, 0.2), 2);

            // Zoom toward mouse position
            const rect = container.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            panX = mouseX - (mouseX - panX) * (newScale / scale);
            panY = mouseY - (mouseY - panY) * (newScale / scale);

            scale = newScale;
            updateTransform();
        });

        // Pan with drag
        container.addEventListener('mousedown', (e) => {
            isDragging = true;
            startX = e.clientX - panX;
            startY = e.clientY - panY;
        });

        container.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            panX = e.clientX - startX;
            panY = e.clientY - startY;
            updateTransform();
        });

        container.addEventListener('mouseup', () => isDragging = false);
        container.addEventListener('mouseleave', () => isDragging = false);

        // Zoom controls
        function zoomIn() {
            scale = Math.min(scale * 1.2, 2);
            updateTransform();
        }

        function zoomOut() {
            scale = Math.max(scale * 0.8, 0.2);
            updateTransform();
        }

        function resetView() {
            scale = 0.6;
            panX = -400;
            panY = 0;
            updateTransform();
        }

        function fitToScreen() {
            scale = 0.4;
            panX = 100;
            panY = 50;
            updateTransform();
        }

        // Draw connectors
        function drawConnectors() {
            const connections = [
                // Phase 1
                { from: [980, 210], to: [980, 320], color: 'default' },
                { from: [810, 350], to: [680, 310], color: 'default' },
                { from: [1080, 350], to: [1150, 310], color: 'default' },

                // Phase 1 to 2
                { from: [980, 380], to: [980, 480], color: 'default' },

                // Phase 2
                { from: [980, 540], to: [980, 580], color: 'default' },
                { from: [980, 640], to: [980, 700], color: 'default' },
                { from: [850, 650], to: [680, 700], color: 'default' },
                { from: [1110, 650], to: [1280, 700], color: 'default' },

                // Persona tracks to platforms
                { from: [680, 760], to: [680, 790], color: 'default' },
                { from: [980, 760], to: [980, 790], color: 'default' },
                { from: [1280, 760], to: [1280, 790], color: 'default' },

                // Platforms to analysis
                { from: [680, 850], to: [900, 900], color: 'default' },
                { from: [980, 850], to: [980, 900], color: 'default' },
                { from: [1280, 850], to: [1060, 900], color: 'default' },

                // Analysis to decision
                { from: [980, 960], to: [980, 1020], color: 'default' },

                // Decision branches
                { from: [890, 1060], to: [750, 1040], color: 'green' },
                { from: [750, 1040], to: [550, 1040], color: 'green' },
                { from: [180, 1060], to: [180, 1200], color: 'green' },

                { from: [980, 1100], to: [980, 1180], color: 'yellow' },

                { from: [1070, 1060], to: [1220, 1000], color: 'red' },
                { from: [1070, 1080], to: [1220, 1130], color: 'red' },
                { from: [1420, 1050], to: [1590, 1180], color: 'red' },

                // Phase 3 Scale path
                { from: [180, 1360], to: [180, 1400], color: 'green' },
                { from: [180, 1620], to: [180, 1650], color: 'green' },

                // Phase 4
                { from: [180, 1710], to: [180, 1750], color: 'default' },
                { from: [180, 1810], to: [180, 1860], color: 'default' },
                { from: [140, 1920], to: [120, 1980], color: 'default' },
                { from: [220, 1920], to: [290, 1980], color: 'default' },
                { from: [120, 2050], to: [180, 2120], color: 'default' },
                { from: [290, 2050], to: [230, 2120], color: 'default' },

                // Iterate loop back
                { from: [980, 1240], to: [980, 1320], color: 'yellow' },
            ];

            let svg = '';
            connections.forEach(conn => {
                const [x1, y1] = conn.from;
                const [x2, y2] = conn.to;
                const markerEnd = conn.color === 'green' ? 'url(#arrowhead-green)' :
                                  conn.color === 'yellow' ? 'url(#arrowhead-yellow)' :
                                  conn.color === 'red' ? 'url(#arrowhead-red)' : 'url(#arrowhead)';
                const colorClass = conn.color !== 'default' ? conn.color : '';

                // Calculate control points for curved lines
                const midY = (y1 + y2) / 2;
                const path = `M ${x1} ${y1} C ${x1} ${midY}, ${x2} ${midY}, ${x2} ${y2}`;

                svg += `<path d="${path}" class="connector ${colorClass}" marker-end="${markerEnd}" />`;
            });

            // Keep the defs, add new paths
            const defs = connectorsEl.querySelector('defs').outerHTML;
            connectorsEl.innerHTML = defs + svg;
        }

        // Initialize
        updateTransform();
        drawConnectors();
    </script>
</body>
</html>
